# Hospital Anomalies Case Study Configuration

# Dataset Configuration
datasets:
  - cihi_hospital_admissions
  - cihi_bed_occupancy
  - cihi_icu_utilization

# Date Range for Analysis
date_range:
  start: "2015-01-01"
  end: "2026-12-31"

# Data Processing
processing:
  min_rows: 10
  missing_threshold: 0.3  # Maximum allowed missing data ratio
  outlier_std_threshold: 3.0

# Quality Control
qc:
  fail_fast: true  # Stop pipeline immediately on QC failures
  required_columns:
    - date
  date_column: date
  date_monotonic_group_by:
    - region
    - hospital_id
  missing_threshold: 0.3  # Maximum allowed missing data ratio
  fail_on_missing_threshold: false  # Set to true to fail on threshold violations
  check_outliers: false  # Set to true to include outlier detection in QC
  numeric_bounds:
    # Bounds are auto-detected for common patterns, but can be explicitly configured here
    # Example: admissions: {min: 0}
    # Example: occupancy_rate: {min: 0, max: 100}

# Feature Engineering
features:
  rolling_windows: [7, 14, 30]  # Days for rolling statistics
  lag_features: [1, 7, 30]  # Lag periods for time-series features
  seasonal_features: true  # Include month, quarter indicators

# Model: Isolation Forest
isolation_forest:
  n_estimators: 100
  max_samples: 256
  contamination: 0.05  # Expected proportion of anomalies
  random_state: 42
  n_jobs: -1

# Model: Autoencoder (optional)
autoencoder:
  enabled: false
  encoding_dim: 16
  hidden_layers: [32, 16]
  epochs: 50
  batch_size: 32
  learning_rate: 0.001
  validation_split: 0.2
  random_state: 42

# Evaluation
evaluation:
  top_k_anomalies: 20  # Number of top anomalies to report
  persistence_window: 7  # Days to check for anomaly persistence
  seasonality_check: true

# Output
output:
  save_predictions: true
  save_features: true
  save_figures: true
  figure_format: "png"
  figure_dpi: 300

# Paths (relative to project root)
paths:
  raw_data: "data/raw/cihi"
  processed_data: "data/processed/cihi"
  models: "case_studies/hospital_anomalies/reports/models"
  figures: "case_studies/hospital_anomalies/reports/figures"
  results: "case_studies/hospital_anomalies/reports/results"
